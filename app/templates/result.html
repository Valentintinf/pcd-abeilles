{% extends 'base.html' %}

{% block title %}Résultat - Détection de Varroa{% endblock %}

{% block content %}
<div class="container mt-5 text-center">
    <h2>Résultat de la détection</h2>

    <!-- Affichage de l'image depuis la base -->
    <img src="{{ url_for('get_new_image', image_id=img.id) }}"
         class="img-fluid mt-3"
         alt="Image analysée"
         style="max-height: 400px; object-fit: contain;">

    <!-- Résultat du modèle -->
    {% if result %}
    <div class="mt-4">
        <h4>Présence de Varroa : {{ 'Oui' if result.class == 1 else 'Non' }}</h4>
        <p>Confiance du modèle : {{ (result.confidence * 100) | round(2) }}%</p>

        {% if result.confidence < 0.6 %}
        <div class="alert alert-warning mt-3">
            ⚠️ Prédiction incertaine — merci de vérifier manuellement cette image.
        </div>
        {% endif %}
    </div>
    {% endif %}

    <!-- Retour -->
    <div class="mt-4">
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Analyser une autre image</a>
    </div>
</div>
{% endblock %}